webpackJsonp([1],{"/7Fh":function(t,e){},"4WSK":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("3cXf"),o=s.n(i),n=s("xd7I"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=s("C7Lr")({name:"App"},a,!1,function(t){s("/7Fh")},null,null).exports,l=(s("4WSK"),s("bzuk")),c=s.n(l),u=s("ZWLj"),h=s("Muz9"),d=s.n(h),p={name:"register",data:function(){return{fullscreenLoading:!1,register:{user:"",password:""},voidUser:!1,voidPassword:!1,voidSubmit:!0,userTips:"",passTips:"",afterSubmitTips:""}},methods:{openFullScreen:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.open(),t.$router.push({path:"/login"})},500)},open:function(){this.$message({message:"恭喜你，注册成功-请登录",type:"success"})},resetForm:function(){this.register.user="",this.register.password=""},checkUser:function(){this.register.user||(this.voidUser=!0,this.userTips="用户名不能为空"),-1!=this.register.user.indexOf(" ")&&(this.voidUser=!0,this.userTips="用户名不能包含空格")},checkPass:function(){this.register.password||(this.voidPassword=!0,this.passTips="密码不能为空"),-1!=this.register.password.indexOf(" ")&&(this.voidPassword=!0,this.passTips="密码不能包含空格")},lookCheckUser:function(){this.voidUser=!1},lookCheckPass:function(){this.voidPassword=!1},toRegister:function(){var t=this;if(!this.register.user||!this.register.password||-1!=this.register.user.indexOf(" ")||-1!=this.register.password.indexOf(" "))return this.voidSubmit=!0,void(this.afterSubmitTips="用户名或密码不合法");var e={user:this.register.user,password:this.register.password,title:"thisispassbutcantdelete"},s=o()(e);d.a.post("./register.php","data="+s).then(function(e){console.log(e);/用户名已存在/g.test(e.data)?(t.voidSubmit=!0,t.afterSubmitTips="用户名已存在"):t.openFullScreen()})},hidAfterSubmitTips:function(){this.voidSubmit=!1}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap",on:{click:t.hidAfterSubmitTips}},[s("el-form",{attrs:{"label-width":"40px"}},[s("p",[s("i",{staticClass:"iconfont icon-yonghuzhuce"}),s("span",[t._v("用户注册")])]),t._v(" "),s("el-form-item",{attrs:{label:"帐号",prop:"pass"}},[s("el-input",{attrs:{type:"text",autocomplete:"on",placeholder:"请输入注册帐号",maxlength:"12"},on:{blur:t.checkUser,focus:t.lookCheckUser},model:{value:t.register.user,callback:function(e){t.$set(t.register,"user",e)},expression:"register.user"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidUser,expression:"voidUser"}],attrs:{id:"checkUserr"}},[t._v(t._s(t.userTips))])],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入注册密码",maxlength:"12"},on:{blur:t.checkPass,focus:t.lookCheckPass},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidPassword,expression:"voidPassword"}],attrs:{id:"checkPasswordd"}},[t._v(t._s(t.passTips))])],1),t._v(" "),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.toRegister(e)}}},[t._v("注册")]),t._v(" "),s("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidSubmit,expression:"voidSubmit"}],staticClass:"afterSubmitTips"},[t._v(t._s(t.afterSubmitTips))]),t._v(" "),s("router-link",{staticClass:"tologin",attrs:{to:"/login"}},[t._v("已有帐号，点此登录")])],1)},staticRenderFns:[]};var v=s("C7Lr")(p,m,!1,function(t){s("RV5s")},"data-v-0e7d0c8a",null).exports,f={name:"register",data:function(){return{fullscreenLoading:!1,login:{user:"",password:"",checked:!1},voidUser:!1,voidPassword:!1,voidSubmit:!0,afterSubmitTips:""}},methods:{open:function(){this.$message({message:"恭喜你，登录成功",type:"success"})},openFullScreen:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.open(),t.$router.push({path:"/home"})},500)},resetForm:function(){this.login.user="",this.login.password=""},checkUser:function(){this.login.user||(this.voidUser=!0)},checkPass:function(){this.login.password||(this.voidPassword=!0)},lookCheckUser:function(){this.voidUser=!1},lookCheckPass:function(){this.voidPassword=!1},tologin:function(){var t=this;if(!this.login.user||!this.login.password)return this.voidSubmit=!0,void(this.afterSubmitTips="用户名密码不能为空");var e={user:this.login.user,password:this.login.password},s=o()(e);d.a.post("./login.php","data="+s).then(function(s){s.data.replace(/[\r\n]/g,"")?(t.voidSubmit=!0,t.afterSubmitTips=s.data):(t.login.checked&&localStorage.setItem("user",e.user),sessionStorage.setItem("user",e.user),sessionStorage.setItem("pass",e.password),t.keepUser(e.user),t.openFullScreen())})},hidAfterSubmitTips:function(){this.voidSubmit=!1},keepUser:function(t){this.$store.commit("findUser",t)}},created:function(){localStorage.length&&(this.login.user=localStorage.getItem("user"))}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap",on:{click:t.hidAfterSubmitTips}},[s("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"40px"}},[s("p",[s("i",{staticClass:"iconfont icon-zhucedengluyonghuming"}),s("span",[t._v("欢迎登录")])]),t._v(" "),s("el-form-item",{attrs:{label:"帐号",prop:"pass"}},[s("el-input",{attrs:{type:"text",autocomplete:"on",placeholder:"请输入登录帐号",maxlength:"12"},on:{blur:t.checkUser,focus:t.lookCheckUser},model:{value:t.login.user,callback:function(e){t.$set(t.login,"user",e)},expression:"login.user"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidUser,expression:"voidUser"}],attrs:{id:"checkUser"}},[t._v("帐号不能为空")])],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入登录密码",maxlength:"12"},on:{blur:t.checkPass,focus:t.lookCheckPass},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidPassword,expression:"voidPassword"}],attrs:{id:"checkPassword"}},[t._v("密码不能为空")])],1),t._v(" "),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.tologin(e)}}},[t._v("登录")]),t._v(" "),s("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1),t._v(" "),s("el-checkbox",{model:{value:t.login.checked,callback:function(e){t.$set(t.login,"checked",e)},expression:"login.checked"}},[t._v("记住帐号")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.voidSubmit,expression:"voidSubmit"}],staticClass:"afterSubmitTips"},[t._v(t._s(t.afterSubmitTips))])],1),t._v(" "),s("router-link",{staticClass:"tologin",attrs:{to:"/register"}},[t._v("还没帐号？点此注册")])],1)},staticRenderFns:[]};var w=s("C7Lr")(f,g,!1,function(t){s("h/43")},"data-v-598a8754",null).exports,_={writeCanvas:function(t){var e=document.querySelector("#canvas"),s=e.getContext("2d");function i(t){var i=e.getBoundingClientRect().top,o=e.getBoundingClientRect().left;s.lineTo(t.clientX-o,t.clientY-i+10),s.stroke()}s.lineWidth=3,s.strokeStyle="black",e.addEventListener("mousedown",function(){s.beginPath(),e.addEventListener("mousemove",i,!1)},!1),e.addEventListener("mouseup",function(){s.closePath(),_.srcData=e.toDataURL(),e.removeEventListener("mousemove",i)},!1),document.querySelector(t).addEventListener("click",function(){var t=e.offsetWidth,i=e.offsetHeight;s.clearRect(0,0,t,i)},!1)},srcData:""},y=_,k={name:"alertContent",data:function(){return{isactive:!1,mytitle:this.title,mycontent:this.content,hidSign:!0,hidRename:!1,canWrite:!1,srcData:this.srcImfor,lookImg:!1,parentDate:this.parentDATE}},methods:{tosave:function(){var t=this;if(this.mytitle&&this.mycontent){var e=new Date,s=e.getFullYear().toString()+"-"+(e.getMonth()+1)+"-"+(1==e.getDate().toString().length?0+e.getDate().toString():e.getDate().toString())+" "+(1==e.getHours().toString().length?0+e.getHours().toString():e.getHours().toString())+":"+(1==e.getMinutes().toString().length?0+e.getMinutes().toString():e.getMinutes().toString());if("isNew"===this.neworrevise){for(var i=0;i<this.parentDate.length;i++)if(this.parentDate[i].title===this.mytitle)return void this.open4();var n=y.srcData.replace(/\+/g,"%2B"),a={user:this.$store.state.user,title:this.mytitle,content:this.mycontent,time:s,img:n},r=o()(a);d.a.post("./add.php","data="+r).then(function(e){e.data.replace(/[\r\n]/g,"")?console.log(e.data):(console.log("newdate"),t.open2())}),y.srcData="",this.$emit("myregetdata")}if("isRevise"===this.neworrevise){for(i=0;i<this.parentDate.length;i++)if(this.parentDate[i].title!==this.title&&this.parentDate[i].title===this.mytitle)return void this.open4();a={user:this.$store.state.user,oldTitle:this.title,title:this.mytitle,time:s,content:this.mycontent},r=o()(a);d.a.post("./update.php","data="+r).then(function(e){e.data.replace(/[\r\n]/g,"")?console.log(e):(console.log("update"),t.open3())}),this.$emit("myregetdata")}this.tohid()}else this.open()},tohid:function(){var t=this;this.isactive=!1,setTimeout(function(){t.$emit("childValue",!1)},200)},open:function(){var t=this;this.$alert("标题与内容均不能为空","无效提交",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"请输入标题/内容"})}})},open2:function(){this.$message({message:"笔记添加成功",type:"success"})},open3:function(){this.$message({message:"笔记修改成功",type:"success"})},open4:function(){var t=this;this.$alert("标题不能与现有的重复","无效提交",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"请输入不同的标题"})}})},illegalHandleMytitle:function(){this.mytitle=this.mytitle.replace(/[<>]/g,"")},illegalHandleMycontent:function(){this.mycontent=this.mycontent.replace(/[<>]/g,"")},startWrite:function(){this.hidSign=!1,this.canWrite=!0,this.hidRename=!0}},created:function(){var t=this;setTimeout(function(){t.isactive=!0},100)},props:["isdisabled","isshow","toshow","isshowtwo","title","content","srcImfor","neworrevise","parentDATE"],computed:{},mounted:function(){y.writeCanvas(".clear")}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cover_wrap"},[s("div",{staticClass:"write",class:{active:t.isactive}},[s("div",{staticClass:"write_title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.mytitle,expression:"mytitle"}],attrs:{type:"text",name:"",value:"",placeholder:"请输入记事的标题",maxlength:"15",disabled:t.isdisabled},domProps:{value:t.mytitle},on:{keyup:t.illegalHandleMytitle,input:function(e){e.target.composing||(t.mytitle=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"write_content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.mycontent,expression:"mycontent"}],attrs:{name:"name",placeholder:"请输入要记事内容(最多200个字符)",maxlength:"200",disabled:t.isdisabled},domProps:{value:t.mycontent},on:{keyup:t.illegalHandleMycontent,input:function(e){e.target.composing||(t.mycontent=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"sign"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.toshow,expression:"toshow"}]},[t.hidSign?s("span",{on:{click:t.startWrite}},[t._v("写一个个性签名？")]):t._e(),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.hidRename,expression:"hidRename"}],staticClass:"clear"},[t._v("重写")]),t._v(" "),s("canvas",{directives:[{name:"show",rawName:"v-show",value:t.canWrite,expression:"canWrite"}],attrs:{id:"canvas",width:"400",height:"140"}})]),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.isshowtwo,expression:"isshowtwo"}],attrs:{src:t.srcData}})]),t._v(" "),s("el-row",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{type:"info",plain:"",size:"small"},on:{click:t.tosave}},[t._v("保存")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{type:"info",plain:"",size:"small"},on:{click:t.tohid}},[t._v("取消")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isshowtwo,expression:"isshowtwo"}],attrs:{type:"info",plain:"",size:"small"},on:{click:t.tohid}},[t._v("关闭")])],1)],1)])},staticRenderFns:[]};var S={name:"home",data:function(){return{noOne:!1,toalert:!1,isdisabled:!1,isshow:!0,isshowtwo:!1,title:"",content:"",mydata:[],regetData:!1,toChildSrc:"",toshow:!0,neworrevise:""}},watch:{mydata:function(t,e){t.length?this.noOne=!1:this.noOne=!0},regetData:function(t,e){!0===t&&(this.getDataFrom(),this.regetData=!1)}},components:{alertContent:s("C7Lr")(k,b,!1,function(t){s("iQOI")},"data-v-2a28053e",null).exports},methods:{getDataFrom:function(){var t=this,e={user:this.$store.state.user},s=o()(e);d.a.post("./query_all.php","data="+s).then(function(e){if(e.data instanceof Array){var s=[];e.data.length>20&&(e.data.length=20);for(var i=1;i<e.data.length;i++)s.push(e.data[i]);t.mydata=s}else;})},myregetdataa:function(){console.log("emit"),this.regetData=!this.regetData},childValue:function(t){this.toalert=t},newnotepad:function(){this.isshow=!0,this.toshow=!0,this.isshowtwo=!1,this.isdisabled=!1,this.toalert=!0,this.title="",this.content="",this.neworrevise="isNew"},tolook:function(t){this.isshow=!1,this.toshow=!1,this.isshowtwo=!0,this.isdisabled=!0,this.toalert=!0,this.title=this.mydata[t].title,this.content=this.mydata[t].content,this.toChildSrc=this.mydata[t].img},torevise:function(t){this.toshow=!1,this.isshow=!0,this.isshowtwo=!1,this.isdisabled=!1,this.toalert=!0,this.title=this.mydata[t].title,this.content=this.mydata[t].content,this.toChildSrc=this.mydata[t].img,this.neworrevise="isRevise"},todelate:function(t){var e=this;this.$confirm("此操作将永久删除该笔记, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s={user:e.$store.state.user,title:e.mydata[t].title},i=o()(s);d.a.post("./delate.php","data="+i).then(function(t){e.getDataFrom()}),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},beforeCreate:function(){},created:function(){this.getDataFrom(),0==this.mydata.length?this.noOne=!0:this.noOne=!1}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap"},[s("div",{staticClass:"user_information"},[t._v("\n      欢迎你  用户 "),s("span",[t._v(t._s(this.$store.state.user))])]),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"new_build_thing"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.newnotepad}},[t._v("新建笔记")])],1),t._v(" "),s("div",{staticClass:"thing_list"},[t.noOne?s("p",[t._v("您还没有任何记事，点击上面按钮新建一个吧...")]):t._e(),t._v(" "),s("ul",t._l(t.mydata,function(e,i){return s("li",[s("p",[t._v(t._s(e.title))]),s("span",[s("i",{staticClass:"iconfont icon-chakan",attrs:{title:"查看笔记"},on:{click:function(e){return t.tolook(i)}}}),s("i",{staticClass:"iconfont icon-xiugai",attrs:{title:"修改笔记"},on:{click:function(e){return t.torevise(i)}}}),s("i",[s("el-button",{staticClass:"iconfont icon-shanchu",attrs:{id:"special",title:"删除笔记"},on:{click:function(e){return t.todelate(i)}}})],1)]),s("span",{staticClass:"dateSpan"},[t._v(t._s(e.time))])])}),0)])]),t._v(" "),t.toalert?s("alertContent",{attrs:{isdisabled:t.isdisabled,isshow:t.isshow,toshow:t.toshow,isshowtwo:t.isshowtwo,title:t.title,content:t.content,srcImfor:t.toChildSrc,neworrevise:t.neworrevise,parentDATE:t.mydata},on:{childValue:t.childValue,myregetdata:t.myregetdataa}}):t._e()],1)},staticRenderFns:[]};var C=s("C7Lr")(S,x,!1,function(t){s("jAd1")},"data-v-41c67dfa",null).exports,T=new u.a({routes:[{path:"*",redirect:"/register"},{path:"/register",name:"register",component:v},{path:"/login",name:"login",component:w},{path:"/home",name:"home",component:C,meta:{requireAuth:!0}}]}),$=s("2bvH");n.default.use($.a);var D=sessionStorage.getItem("user"),P=sessionStorage.getItem("pass"),U=new $.a.Store({state:{user:D,pass:P},mutations:{findUser:function(t,e){t.user=e}}});n.default.config.productionTip=!1,n.default.use(c.a),n.default.use(u.a),n.default.use($.a),T.beforeEach(function(t,e,s){if(t.meta.requireAuth)if("login"==e.name)s();else{var i={user:U.state.user,password:U.state.pass},n=o()(i);d.a.post("./login.php","data="+n).then(function(t){t.data.replace(/[\r\n]/g,"")?s({path:"/login"}):s()})}else s()}),new n.default({el:"#app",router:T,store:U,components:{App:r},template:"<App/>"})},RV5s:function(t,e){},"h/43":function(t,e){},iQOI:function(t,e){},jAd1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ee06ed796350f8dce940.js.map